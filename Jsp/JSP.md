# JSP
# 목차
* [JSP(Java Server Page)란?](#JSPJava-Server-Page란)
* [JSP의 특징](#JSP의-특징)
* [JSP 사용](#JSP-사용)
* [JSP 지시어(Directive)](#JSP-지시어Directive)
* [JSP 스크립트 요소](#JSP-스크립트-요소)

# JSP(Java Server Page)란?
* `Java`를 이용하여 `동적인 웹 페이지`를 만들기 위해 Sun Microsystems사가 개발한 기술
*************************

# JSP의 특징
## 1. 강력한 이식성
* `자바기반`의 언어로 어떤 `JSP 컨테이너`에서도 사용이 가능하므로 한 번 작성한 코드를 별다른 수정 없이 다른 플랫폼으로 이식이 가능하다.
* `모듈화`와 `모듈의 재사용성`이 좋다.

## 2. 서버 자원의 효율적인 사용
* `스레드(Thread)` 기반의 아키텍처 사용으로 불필요한 자원 낭비를 감소시켰다.

## 3. 간편한 MVC 패턴(디자인 패턴)
* `MVC 패턴`을 `JSP(View)`와 `자바빈즈(Model)`, `서블릿(Controller)`을 이용해 쉽게 구현할 수 있다.

### 🔸 MVC 패턴
* 사용자에게 보여지는 화면인 `View` 부분과 실제 비즈니스 로직이 들어가는 `Model` 부분 그리고 `View`와 `Model`을 연결시켜주는 `Controller` 부분으로 구성
* 최근에 중대형 프로젝트에서 효과적이라 평가되어 많이 사용되고 있다.

### 🔸 디자인 패턴
* 프로젝트를 개발함에 있어서 특정한 문제가 주어졌을 때 그 문제를 해결하기 위한 방법을 설명해 놓은 일종의 지침
*********************************

# JSP 사용
* `HTML` 태그와 `Java` 코드를 함께 사용한다.

```html
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
  <%
      // 스크립틀릿
  %>
</body>
</html>
```

* `HTML` `body` 태그 안에서 스크립틀릿을 쓴 다음에 스크립틀릿의 범위 내에 코드를 작성한다.

```html
<h2>자바코드로 테이블 생성</h2>
	<table border="1">
		<tr>
			<td>번호</td><td>이름</td>
		</tr>
		<%
			for (int i = 1; 6 > i; i++)
			{
				%>
				<tr>
					<td><%=i %></td><td>학생<%=i %></td>
				</tr>
				<%
			}
		%>
	</table>
```

* 위와 같이 자바 코드 사이에 `스크립틀릿`이 끝나는 표시(`%>`)를 하고 `HTML` 태그를 쓴 다음에 `<%= %>`를 이용해 자바 코드의 지역 변수를 출력하는 것이 가능하다.(신기...)

## 🔸 JSP 주석

```jsp
<%-- --%> (웹페이지 개발자 도구창에서 나타나지 않기 때문에 보안상 이것을 쓰는 것이 더 좋다)
// 자바 스타일도 사용 가능
```

********************************

# JSP 지시어(Directive)

```jsp
<%@ ... %>
```

* `JSP` 파일 내에서 `JSP`를 실행할 컨테이너에서 해당 페이지를 어떻게 처리할 것인가에 대한 설정 정보들을 지정해주는 데 사용
* `page` 지시어, `include` 지시어, `taglib` 지시어 3가지로 나누어진다.

## 1. page 지시어

```jsp
<%@ page 속성1="값1" 속성2="값2" 속성3="값3"... %>
```

* `JSP` 페이지에 대한 속성을 지정하는 지시어
* 속성에는 스크립트 언어, import할 패키지/클래스, 세션 사용 여부, 에러 페이지 등 12개의 설정 정보를 지정해 사용할 수 있다.

|속성|사용법|기본값|설명|
|---|---|---|---|
|language|language="java"|java|스크립트 요소에서 사용할 언어 설정|
|extends|extends="클래스명"|없음|상속받을 클래스를 설정|
|import|import="패키지.클래스명"|없음|import할 패키지.클래스 설정|
|session|session="true"|true|HttpSession 사용 여부를 설정|
|buffer|buffer="16kb"|8kb|JSP 페이지의 출력 버퍼 크기를 설정|
|autoFlush|autoFlush="true"|true|출력 버퍼가 다 찼을 경우 처리 방법을 설정|
|isThreadSafe|isThreadSafe="true"|true|다중 스레드의 동시 실행 여부를 설정|
|info|info="페이지 설명"|없음|페이지 설명|
|errorPage|errorPage="에러 페이지.jsp"|없음|에러 페이지로 사용할 페이지를 지정|
|contentType|contentType="text/html"|text/html;charset=ISO-8859-1|JSP 페이지가 생성할 문서의 타입을 지정|
|isErrorPage|isErrorPage="false"|false|현재 페이지를 에러 페이지로 지정|
|pageEncoding|pageEncoding="euc-kr"|ISO-8859-1|현재 페이지의 문자 인코딩 타입 설정| <br>

* 각각의 속성을 하나의 `page 지시어`에 한 번에 지정할 수도 있으며 여러 개의 `page 지시어`에 나누어 지정할 수도 있다.
* 하지만 `import` 속성을 제외한 나머지 속성은 하나의 페이지에서 오직 한 번씩만 지정할 수 있다.<br><br>

## 2. include 지시어

```jsp
<%@ include file="header.jsp" %>
```

* 특정한 `JSP` 파일 또는 `HTML` 파일을 해당 `JSP` 페이지에 삽입할 수 있도록 하는 기능을 제공한다.
* `include`되는 `JSP` 코드 자체가 해당 `JSP` 페이지에 복사되어 더해지므로 서블릿 컴파일 과정은 `include` 되는 페이지의 수가 아무리 많아도 단 한 번만 이루어지게 된다.
* 사용되는 공통 변수값들을 추가할 때 주로 사용한다.
* `include` 지시어는 중첩 사용이 가능하기 때문에 `include`되는 파일 안에서 또 다른 파일을 `include`하여도 문제없이 동작한다.<br><br>

## 3. taglib 지시어

```jsp
<%@ taglib url="http://taglib.com/sampleURI" prefix="samplePrefix" %>
```

* `JSTL(JSP Standard Tag Library)이나 커스텀 태그 등 태그 라이브러리를 `JSP`에서 사용할 때 접두사를 지정하기 위해 사용된다.
* `uri` 속성과 `prefix` 속성으로 이루어진다.

### 🔸 uri 속성
* 태그 라이브러리에서 정의한 태그와 속성 저보를 저장한 `TLD(Tag Library Descriptor)` 파일이 존재하는 위치 지정

### 🔸 prefix 속성
* 사용할 커스텀 태그의 네임 스페이스(Name Space)를 지정
**************************

# JSP 스크립트 요소
## 1. 선언문

```jsp
<%!
    // 멤버변수와 메서드 선언
%>
```

* 멤버변수와 메서드를 선언하기 위한 영역
* 클래스에서 멤버변수와 메서드를 선언한 것과 동일한 결과로 같은 `JSP` 페이지 어느 위치에서든 참조가 가능하다.

## 2. 스크립틀릿(Scriptlet)

```jsp
<% 문장1; %>
<%
    문장2; 문장3; 문장4; ...
%>
```

* `JSP` 코드를 작성하는 영역
* 서블릿 코드의 작성법이 다소 어려워서 이것을 보완하기 위해 만들어진 방식
* 스크립틀릿 영역에서 선언되는 변수들은 지역변수로 인식된다.
* `JSP` 파일이 실행되면 웹 컨테이너에 의해 `JSP` 파일이 파싱되어 서블릿 클래스로 변환된 자바 소스 파일과 클래스 자바 파일이 서버에 저장된다.

## 3. 표현식(Expression)

```jsp
<%=변수 %>
<%=리턴값이 있는 메소드 %>
<%=수식(변수 또는 리턴값이 있는 메소드를 포함할 수 있음) %>
```

* 선언문, 스크립틀릿에 생성한 변수, 메소드의 리턴값을 스크립틀릿 태그 외부에서 출력하기 위해 사용
* 하나의 표현식 태그 내의 구문 전체가 `print()` 메소드의 괄호 안에 통채로 들어가기 때문에 표현식 태그 내부에서는 `세미콜론(;)`을 사용해서는 안된다.
